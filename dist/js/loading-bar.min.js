!function(t){"use strict";function e(t){this.maxBars=t.maxBars||12;for(var e='<div class="loading-bar">',i=0;i<this.maxBars;i++)e+='<div class="bar"></div>';return t.showPercentage===!0&&(e+='<div class="percentage-container"><div id="percentage">0%</div></div>'),this.percentage=0,e+="</div>",this.loadingBars={},this.barsLoaded=0,this.loadIntoDiv(t.div,e),t.showPercentage===!0&&(this.percentageDisplay=document.getElementById("percentage"),this.centerPercentageLabel()),this.initializeStyle(t.style),this}e.prototype.loadIntoDiv=function(t,e){if(null===t)throw"LoadingBar failed to load! Invalid div element.";if(void 0!==t[0])"div"===t[0].localName&&(t[0].innerHTML=e,this.parentDiv=t[0]);else{if("div"!==t.localName)throw"LoadingBar failed to load! Invalid div element.";t.innerHTML=e,this.parentDiv=t}this.widget=document.getElementsByClassName("loading-bar")[0],this.loadingBars=this.widget.getElementsByClassName("bar"),this.hide()},e.prototype.centerPercentageLabel=function(){var t=(this.parentDiv.clientHeight-this.percentageDisplay.clientHeight)/2-10;this.percentageDisplay.style.marginTop=t+"px"},e.prototype.initializeStyle=function(t){void 0!==t?(this.widget.containerColor=t.containerColor||"#111111",this.widget.barFilledColor=t.barFilledColor||"#FE8301",this.widget.barEmptyColor=t.barEmptyColor||"#050505",this.widget.percentageColor=t.percentageColor||"#FFFFFF",this.widget.barWidth=t.barWidth):(this.widget.barFilledColor="#FE8301",this.widget.barEmptyColor="#050505",this.widget.containerColor="#111111",this.widget.percentageColor="#FFFFFF"),this.applyStyles(),this.show()},e.prototype.applyStyles=function(){this.widget.style.backgroundColor=this.widget.containerColor,void 0!==this.percentageDisplay&&(this.percentageDisplay.style.color=this.widget.percentageColor),void 0!==this.widget.barWidth&&this.setBarWidths(),this.resetBars()},e.prototype.setBarWidths=function(){for(var t=0;t<this.maxBars;t++)this.loadingBars[t].style.width=this.widget.barWidth},e.prototype.resetBars=function(){for(var t=this.widget.barEmptyColor,e=0;e<this.maxBars;e++)this.loadingBars[e].style.backgroundColor=t},e.prototype.show=function(){this.widget.style.visibility="visible"},e.prototype.hide=function(){void 0!==this.animationInterval&&this.stopAnimation(),this.widget.style.visibility="hidden"},e.prototype.animate=function(t){this.stopAnimation();var e=this,i=void 0!==this.percentageDisplay,a=setInterval(function(){return e.barsLoaded<e.maxBars?(e.loadingBars[e.barsLoaded].style.backgroundColor=e.widget.barFilledColor,e.barsLoaded++,void(i?e.updatePercentage(e.barsLoaded):e.percentage=~~(e.barsLoaded/e.maxBars*100))):(e.barsLoaded=0,e.resetBars(),e.percentage=0,void(i&&e.updatePercentage(e.barsLoaded)))},t||100);return this.animationInterval=a,this},e.prototype.stopAnimation=function(){clearInterval(this.animationInterval)},e.prototype.advanceByPercentage=function(t){return this.barsLoaded>this.maxBars||this.barsLoaded<0||(t=t.toFixed(2),void 0!==this.percentageDisplay?this.updatePercentage(this.barsLoaded,t):this.addPercentage(t),this.barsLoaded=~~(this.percentage/100*this.maxBars),this.barsLoaded<this.maxBars||(this.barsLoaded=this.maxBars),this.barsLoaded<0&&(this.barsLoaded=0),0>t&&this.resetBars(),this.fillBars()),this},e.prototype.advanceBy=function(t){return t=~~t,this.barsLoaded>this.maxBars||this.barsLoaded<0||(this.barsLoaded+=t,this.barsLoaded<this.maxBars||(this.barsLoaded=this.maxBars),this.barsLoaded<0&&(this.barsLoaded=0),0>t&&this.resetBars(),this.fillBars(),void 0!==this.percentageDisplay?this.updatePercentage(this.barsLoaded):this.percentage=~~(this.barsLoaded/this.maxBars*100)),this},e.prototype.setValue=function(t){return this.barsLoaded>this.maxBars||this.barsLoaded<0||(this.barsLoaded=~~(this.maxBars*t),t=t.toFixed(2),this.barsLoaded<this.maxBars||(this.barsLoaded=this.maxBars),this.barsLoaded<0&&(this.barsLoaded=0),this.resetBars(),this.fillBars(),this.percentage=0,this.addPercentage(t),void 0!==this.percentageDisplay&&this.updatePercentage(this.barsLoaded,0)),this},e.prototype.fillBars=function(){for(var t=0;t<this.barsLoaded;t++)this.loadingBars[t].style.backgroundColor=this.widget.barFilledColor},e.prototype.updatePercentage=function(t,e){t>this.maxBars?this.percentage=0:void 0===e?this.percentage=~~(t/this.maxBars*100):this.addPercentage(e),this.percentageDisplay.innerHTML=this.percentage+"%"},e.prototype.addPercentage=function(t){this.percentage+=100*t,this.percentage<0&&(this.percentage=0),this.percentage>100&&(this.percentage=100)},e.prototype.reset=function(){this.barsLoaded=0,this.percentage=0,void 0!==this.percentageDisplay&&this.updatePercentage(0),this.resetBars()},t.LoadingBar=e}(window);