!function(a){"use strict";function b(a){this.maxBars=a.maxBars||12;for(var b='<div class="loading-bar">',c=0;c<this.maxBars;c++)b+='<div class="bar"></div>';return a.showPercentage===!0&&(b+='<div class="percentage-container"><div class="percentage">0%</div></div>'),this.percentage=0,b+="</div>",this.loadingBars={},this.barsLoaded=0,this.loadIntoDiv(a.div,b),a.showPercentage===!0&&(this.percentageDisplay=this.parentDiv.getElementsByClassName("percentage")[0],this.centerPercentageLabel()),this.initializeStyle(a.style),this}b.prototype.loadIntoDiv=function(a,b){if(null===a)throw"LoadingBar failed to load! Invalid div element.";if(void 0!==a[0])"div"===a[0].localName&&(a[0].innerHTML=b,this.parentDiv=a[0]);else{if("div"!==a.localName)throw"LoadingBar failed to load! Invalid div element.";a.innerHTML=b,this.parentDiv=a}this.widget=this.parentDiv.children[0],this.loadingBars=this.widget.getElementsByClassName("bar"),this.hide()},b.prototype.centerPercentageLabel=function(){var a=(this.parentDiv.clientHeight-this.percentageDisplay.clientHeight)/2-9;this.percentageDisplay.style.marginTop=a+"px"},b.prototype.initializeStyle=function(a){void 0!==a?(this.widget.barFilledColor=a.barFilledColor||"#FE8301",this.widget.barEmptyColor=a.barEmptyColor||"#050505",void 0!==a.containerColor&&(this.widget.containerColor=a.containerColor),void 0!==a.percentageColor&&(this.widget.percentageColor=a.percentageColor),this.widget.barWidth=a.barWidth):(this.widget.barFilledColor="#FE8301",this.widget.barEmptyColor="#050505"),this.applyStyles(),this.show()},b.prototype.applyStyles=function(){void 0!==this.widget.containerColor&&(this.widget.style.backgroundColor=this.widget.containerColor),void 0!==this.percentageDisplay&&void 0!==this.widget.percentageColor&&(this.percentageDisplay.style.color=this.widget.percentageColor),void 0!==this.widget.barWidth&&this.setBarWidths(),this.resetBars()},b.prototype.setBarWidths=function(){for(var a=0;a<this.maxBars;a++)this.loadingBars[a].style.width=this.widget.barWidth},b.prototype.resetBars=function(){for(var a=this.widget.barEmptyColor,b=0;b<this.maxBars;b++)this.loadingBars[b].style.backgroundColor=a},b.prototype.show=function(){this.widget.style.visibility="visible"},b.prototype.hide=function(){void 0!==this.animationInterval&&this.stopAnimation(),this.widget.style.visibility="hidden"},b.prototype.animate=function(a){this.stopAnimation();var b=this,c=void 0!==this.percentageDisplay,d=setInterval(function(){return b.barsLoaded>=b.maxBars?(b.barsLoaded=0,b.resetBars(),b.percentage=0,void(c&&b.updatePercentage(b.barsLoaded))):(b.loadingBars[b.barsLoaded].style.backgroundColor=b.widget.barFilledColor,b.barsLoaded++,void(c?b.updatePercentage(b.barsLoaded):b.percentage=~~(b.barsLoaded/b.maxBars*100)))},a||100);return this.animationInterval=d,this},b.prototype.stopAnimation=function(){clearInterval(this.animationInterval)},b.prototype.advanceByPercentage=function(a){return this.barsLoaded<=this.maxBars&&this.barsLoaded>=0&&(a=a.toFixed(2),void 0!==this.percentageDisplay?this.updatePercentage(this.barsLoaded,a):this.addPercentage(a),this.barsLoaded=~~(this.percentage/100*this.maxBars),this.barsLoaded>=this.maxBars&&(this.barsLoaded=this.maxBars),this.barsLoaded<0&&(this.barsLoaded=0),0>a&&this.resetBars(),this.fillBars()),this},b.prototype.advanceBy=function(a){return a=~~a,this.barsLoaded<=this.maxBars&&this.barsLoaded>=0&&(this.barsLoaded+=a,this.barsLoaded>=this.maxBars&&(this.barsLoaded=this.maxBars),this.barsLoaded<0&&(this.barsLoaded=0),0>a&&this.resetBars(),this.fillBars(),void 0!==this.percentageDisplay?this.updatePercentage(this.barsLoaded):this.percentage=~~(this.barsLoaded/this.maxBars*100)),this},b.prototype.setValue=function(a){return this.barsLoaded<=this.maxBars&&this.barsLoaded>=0&&(this.barsLoaded=~~(this.maxBars*a),a=a.toFixed(2),this.barsLoaded>=this.maxBars&&(this.barsLoaded=this.maxBars),this.barsLoaded<0&&(this.barsLoaded=0),this.resetBars(),this.fillBars(),this.percentage=0,this.addPercentage(a),void 0!==this.percentageDisplay&&this.updatePercentage(this.barsLoaded,0)),this},b.prototype.fillBars=function(a){for(var b=0;b<this.barsLoaded;b++)this.loadingBars[b].style.backgroundColor=this.widget.barFilledColor},b.prototype.updatePercentage=function(a,b){a>this.maxBars?this.percentage=0:void 0===b?this.percentage=~~(a/this.maxBars*100):this.addPercentage(b),this.percentageDisplay.innerHTML=this.percentage+"%"},b.prototype.addPercentage=function(a){this.percentage+=100*a,this.percentage<0&&(this.percentage=0),this.percentage>100&&(this.percentage=100)},b.prototype.reset=function(){this.barsLoaded=0,this.percentage=0,void 0!==this.percentageDisplay&&this.updatePercentage(0),this.resetBars()},a.LoadingBar=b}(window);